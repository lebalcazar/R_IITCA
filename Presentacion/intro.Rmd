---
title: "Introducción a R (enfoque espacial)"
subtitle: "Instalación de programas"
author: "Luis Balcázar"
date: "Diciembre 2020"
output: pdf_document
urlcolor: blue
citecolor: blue
linkcolor: blue
lang: es
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

En este documento usted econtrará los sitios web para descargar los programas requeridos para el taller de R. Deberá descargar R, Rtools, Rstudio, SAGA, y algunos paquetes de R desde Rstudio. Esto le tomará un tiempo estimado entre 30 y 40 minutos. 

Los datos para el taller se encuentran en un repositorio de  [GitHub](https://github.com/lebalcazar/R_IITCA.git) (estará disponible una hora antes del curso). Si usted tiene una cuenta de **Git** lo puede clonar, sino lo puede descargar y guaradar en su computador. 


## Instalación de R y Rstudio

Ingresar a la página de **CRAN** (*The Comprehensive $R$ Archive Network*) [en este link](https://cran.r-project.org/)  y descargar **R** para el sistema operativo de su PC (Linux/Window) o Mac. En una PC Windows seleccionar Download R for Windows/base y descargar la versión reciente 4.x.x. Además, para máquinas con Windows es necesario descargar **Rtools** del [siguiente link](https://cran.r-project.org/bin/windows/Rtools/). 


Para descargar **Rstudio** ingrese  en [este link](https://rstudio.com/products/rstudio/) y seleccione la pestaña *DOWNLOAD* (en la parte superior derecha) y luego *RStudio Desktop*  en la versión gratuita. 

Instale los programas **R**, **Rtools** y **Rstudio** y seguir las indicaciones de instalación.

## Primera sesión de R desde Rstudio

Abrir el programa Rstudio, este cargará automáticamente R. Al abrir Rstudio por primera vez, se verá la pantalla como se muestra en la Figura \ref{fig1}. Por defecto el entorno de Rstudio tiene 4 paneles, los cuales se pueden modificar en la pestaña View/Panes. Además, en la pestaña *Tools* puede cambiar la configuración, como el color de fondo, tamaño de letra, etc. 


![Interfaz de Rstudio.\label{fig1}](rstudio.png)

1) Es el **editor** de código.

2) Es la **consola** de R. 

3) Es el **"environment"** de R, además se encuentra el historial y otros.

4) Es el directorio de trabajo (**Files**), además se encuentran los paneles **Plots** y la ayuda.


## Instalación de paquetes
Los paquetes o librerías (`packages()` o `library()`) en R son programas que permiten hacer un trabajo específico. El programa `base` de R tiene un amplio conjunto de librerías para hacer análisis de datos y estadístico, así como gráficos de alta calidad. Sin embargo, existen otros paquetes que reducen el tiempo de análisis y el número de líneas de código.

Abrir un *script* en el editor desde File/New File/R script. Para instalar las librerías se utiliza el comando `install.packages()`, por ejemplo la siguiente línea instala las librerías tidyverse, tmap, lubridate y raster. 



```{r, eval=FALSE, echo=TRUE}
install.packages('tidyverse', 'tmap', 'lubridate', 'raster')
```

Para cargar las librerías en la sesión de R se utiliza la función `library()`. 

```{r}
# programas que se cargarán en la sesión de R
library(tidyverse)  # familia de paquetes para el análisis de datos
library(tmap)  # creación de mapas temáticos
library(lubridate)  # procesamiento de fecha y tiempo
```

Una vez cargada la(s) librería(s) a la sesión de Rstudio, abrir la ayuda de los paquetes para familiarse con ellos `?raster`, `?tmap`, `help("tmap")`, etc., o desde el panel `Help` puede navegar en la ayyuda. 

Instale los paquetes: `"RgoogleMaps", "ggmap", "mapproj", "sf", "osmar", "tidyverse","RColorBrewer","dplyr", "OpenStreetMap", "devtools",  "DT", "raster", "rgdal", "rworldxtra", 'grDevices', 'ggsn', 'tmap', 'utils', 'viridis', 'RColorBrewer', 'RSAGA', 'cptcity'`. Utilizar `install.packages()` como se mostró anteriormente.

Si alguna librería no se instala, ejecute las siguientes lineas

```{r, eval=FALSE, echo=TRUE}
options(download.file.method = 'libcurl') # para conectar con la URL del paquete 
install.packages('nombre_del_paquete', dependences = TRUE)
```

Otra opción es descargar los archivos binarios desde la página de CRAN: <https://cran.r-project.org/> ver la Figura \ref{fig2}. Se descargan los archivos en un .zip. Luego en la pestaña `Tools` de Rstudio ir a la pestaña `Tools/Install Packages/Package Archive` y buscar la carpeta que contiene el archivo .zip descargado. 

![Lista de paquetes de R\label{fig2}](lista_paquetes.png)


En otras ocasiones (**NO SERÁ NECESARIO EN ESTE TALLER**) los programas no están en CRAN y se instalan desde un servicio git (github, gitlab o bitbucket) o Subversion, se utiliza el paquete *remotes* o *devtools* de la siguiente manera:

```{r, eval=FALSE, echo=TRUE}
install.packages("remotes")
# sin cargar las librerías remotes o devtools
remotes::install_github('autor/package_name')

# cargando la librería remotes o devtools
library(remotes)
install_gitlab('autor/package_name')

#Una vez instalado, se puede cargar la librería normalmente
library(package_name)
```

## Instalar SAGA GIS

Descargar e instalar SAGA desde el seguiente [link](https://sourceforge.net/projects/saga-gis/files/). Elija la versión 6.3 que ha sido testeada con la versión de RSAGA.

![Sitio web de SAGA](saga.png)



